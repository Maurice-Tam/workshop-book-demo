<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Company Library - Book Borrowing System</title>
    <style>
        :root {
            --primary-50: #eff6ff;
            --primary-100: #dbeafe;
            --primary-500: #3b82f6;
            --primary-600: #2563eb;
            --primary-700: #1d4ed8;
            --success-500: #10b981;
            --success-100: #d1fae5;
            --warning-500: #f59e0b;
            --warning-100: #fef3c7;
            --error-500: #ef4444;
            --error-100: #fee2e2;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--gray-50);
            color: var(--gray-900);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Navigation Styles */
        .navbar {
            background: white;
            border-bottom: 1px solid var(--gray-200);
            box-shadow: var(--shadow-sm);
        }

        .nav-container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 4rem;
        }

        .nav-brand {
            display: flex;
            align-items: center;
        }

        .nav-brand h1 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--gray-900);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-link {
            text-decoration: none;
            color: var(--gray-500);
            font-weight: 500;
            font-size: 0.875rem;
            padding: 1rem 0.25rem;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .nav-link:hover {
            color: var(--gray-700);
            border-bottom-color: var(--gray-300);
        }

        .nav-link.active {
            color: var(--gray-900);
            border-bottom-color: var(--primary-500);
        }

        .nav-user {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-info {
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .user-avatar {
            width: 2rem;
            height: 2rem;
            background: var(--primary-500);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
        }

        /* Main Content */
        .main-content {
            max-width: 1280px;
            margin: 0 auto;
            padding: 1.5rem 1rem;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Gradient Hero Section */
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--radius-xl);
            padding: 2rem;
            color: white;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .hero-text h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .hero-text p {
            opacity: 0.9;
        }

        .hero-stats {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            padding: 1rem;
            text-align: center;
            min-width: 120px;
        }

        .hero-stats p:first-child {
            font-size: 0.875rem;
            opacity: 0.8;
            margin-bottom: 0.25rem;
        }

        .hero-stats p:last-child {
            font-size: 2rem;
            font-weight: 700;
        }

        /* Card Styles */
        .card {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            overflow: hidden;
        }

        .card-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .card-header h2 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--gray-900);
        }

        .card-body {
            padding: 1.5rem;
        }

        /* Grid Layouts */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .stat-icon {
            width: 2rem;
            height: 2rem;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
            flex-shrink: 0;
        }

        .stat-icon.success {
            background: var(--success-100);
            color: var(--success-500);
        }

        .stat-icon.warning {
            background: var(--warning-100);
            color: var(--warning-500);
        }

        .stat-icon.primary {
            background: var(--primary-100);
            color: var(--primary-500);
        }

        .stat-content h3 {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--gray-500);
            margin-bottom: 0.25rem;
        }

        .stat-content p {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--gray-900);
        }

        /* Books Grid */
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .book-card {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            overflow: hidden;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .book-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .book-card-content {
            padding: 1.5rem;
        }

        .book-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .book-cover {
            width: 4rem;
            height: 5rem;
            background: linear-gradient(135deg, var(--primary-500), #8b5cf6);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 0.75rem;
            flex-shrink: 0;
        }

        .availability-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .availability-badge.available {
            background: var(--success-100);
            color: var(--success-500);
        }

        .availability-badge.unavailable {
            background: var(--error-100);
            color: var(--error-500);
        }

        .book-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .book-author {
            font-size: 0.875rem;
            color: var(--gray-600);
            margin-bottom: 0.5rem;
        }

        .book-category {
            font-size: 0.75rem;
            color: var(--gray-500);
            margin-bottom: 1rem;
        }

        .book-availability {
            font-size: 0.75rem;
            color: var(--gray-500);
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
        }

        .book-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* Button Styles */
        .btn {
            padding: 0.5rem 0.75rem;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex: 1;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: var(--primary-500);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--primary-600);
        }

        .btn-secondary {
            background: white;
            color: var(--gray-700);
            border: 1px solid var(--gray-300);
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--gray-50);
        }

        .btn-outline {
            background: transparent;
            color: var(--gray-600);
            border: 1px solid var(--gray-300);
        }

        .btn-outline:hover:not(:disabled) {
            background: var(--gray-50);
        }

        /* Search and Filter Section */
        .search-section {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .search-form {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 0.5rem 1rem;
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .select {
            padding: 0.5rem 1rem;
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            background: white;
            cursor: pointer;
        }

        .select:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        /* Borrowed Books List */
        .borrowed-book {
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .borrowed-book-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 1rem;
        }

        .borrowed-book-info {
            flex: 1;
        }

        .borrowed-book-title {
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 0.25rem;
        }

        .borrowed-book-author {
            font-size: 0.875rem;
            color: var(--gray-600);
            margin-bottom: 0.5rem;
        }

        .borrowed-book-meta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .borrowed-book-meta span {
            font-size: 0.875rem;
        }

        .due-date {
            color: var(--gray-600);
        }

        .due-date.warning {
            color: var(--warning-500);
        }

        .due-date.error {
            color: var(--error-500);
        }

        .borrowed-book-actions {
            display: flex;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        /* Quick Actions Grid */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .quick-action {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            background: white;
            text-decoration: none;
            color: inherit;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .quick-action:hover {
            background: var(--gray-50);
        }

        .quick-action-icon {
            font-size: 1.5rem;
            margin-right: 0.75rem;
        }

        .quick-action-content h3 {
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 0.25rem;
        }

        .quick-action-content p {
            font-size: 0.875rem;
            color: var(--gray-500);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            z-index: 50;
        }

        .modal {
            background: white;
            border-radius: var(--radius-lg);
            max-width: 42rem;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 1.5rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gray-900);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--gray-400);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: var(--gray-600);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .book-details {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .book-details-cover {
            width: 6rem;
            height: 8rem;
            background: linear-gradient(135deg, var(--primary-500), #8b5cf6);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            flex-shrink: 0;
        }

        .book-details-info h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
        }

        .book-details-info p {
            color: var(--gray-600);
            margin-bottom: 0.5rem;
        }

        .book-description h4 {
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
        }

        .modal-actions {
            display: flex;
            gap: 0.75rem;
            padding-top: 1rem;
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            background: var(--gray-50);
            padding: 0.75rem 1.5rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.75rem;
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--gray-200);
        }

        .table td {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--gray-200);
            vertical-align: top;
        }

        .table tbody tr:hover {
            background: var(--gray-50);
        }

        .status-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-badge.returned {
            background: var(--success-100);
            color: var(--success-500);
        }

        /* Notification Toast */
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            color: white;
            font-weight: 500;
            z-index: 60;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: var(--success-500);
        }

        .notification.error {
            background: var(--error-500);
        }

        /* Empty States */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .empty-state p {
            color: var(--gray-500);
            margin-bottom: 1rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-content {
                flex-direction: column;
                text-align: center;
            }

            .hero-text h1 {
                font-size: 1.75rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .search-form {
                flex-direction: column;
            }

            .search-input {
                min-width: auto;
            }

            .borrowed-book-content {
                flex-direction: column;
                gap: 0.75rem;
            }

            .borrowed-book-actions {
                align-self: stretch;
            }

            .book-details {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .modal-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 1rem 0.5rem;
            }

            .hero-section {
                padding: 1.5rem;
            }

            .card-body {
                padding: 1rem;
            }

            .books-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .font-medium {
            font-weight: 500;
        }

        .font-semibold {
            font-weight: 600;
        }

        .text-sm {
            font-size: 0.875rem;
        }

        .text-xs {
            font-size: 0.75rem;
        }

        .mb-4 {
            margin-bottom: 1rem;
        }

        .mb-8 {
            margin-bottom: 2rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1>📚 Company Library</h1>
            </div>
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" onclick="showPage('dashboard')">Dashboard</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('browse')">Browse Books</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('history')">History</a></li>
            </ul>
            <div class="nav-user">
                <div class="user-info">
                    Welcome, <span class="font-medium">John Doe</span>
                </div>
                <div class="user-avatar">JD</div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page active">
            <!-- Hero Section -->
            <div class="hero-section">
                <div class="hero-content">
                    <div class="hero-text">
                        <h1>Welcome back, John!</h1>
                        <p>Manage your borrowed books and discover new titles</p>
                    </div>
                    <div class="hero-stats">
                        <p>Books borrowed</p>
                        <p><span id="borrowed-count">3</span>/5</p>
                    </div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon success">📖</div>
                    <div class="stat-content">
                        <h3>Currently Reading</h3>
                        <p>3</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon warning">⏰</div>
                    <div class="stat-content">
                        <h3>Due This Week</h3>
                        <p>1</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon primary">📚</div>
                    <div class="stat-content">
                        <h3>Books Read This Year</h3>
                        <p>12</p>
                    </div>
                </div>
            </div>

            <!-- Current Borrows -->
            <div class="card mb-8">
                <div class="card-header">
                    <h2>Currently Borrowed Books</h2>
                </div>
                <div class="card-body">
                    <div id="borrowed-books">
                        <!-- Borrowed books will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="card">
                <div class="card-header">
                    <h2>Quick Actions</h2>
                </div>
                <div class="card-body">
                    <div class="quick-actions">
                        <div class="quick-action" onclick="showPage('browse')">
                            <span class="quick-action-icon">🔍</span>
                            <div class="quick-action-content">
                                <h3>Browse Books</h3>
                                <p>Discover new titles</p>
                            </div>
                        </div>
                        <div class="quick-action" onclick="showPage('browse')">
                            <span class="quick-action-icon">⭐</span>
                            <div class="quick-action-content">
                                <h3>Recommended</h3>
                                <p>Books for you</p>
                            </div>
                        </div>
                        <div class="quick-action" onclick="showPage('history')">
                            <span class="quick-action-icon">📖</span>
                            <div class="quick-action-content">
                                <h3>Reading History</h3>
                                <p>Past borrowed books</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Browse Books Page -->
        <div id="browse-page" class="page">
            <h1 class="mb-4">Browse Books</h1>
            
            <!-- Search and Filters -->
            <div class="search-section">
                <div class="search-form">
                    <input type="text" id="search-input" class="search-input" placeholder="Search by title, author, or keyword..." onkeyup="filterBooks()">
                    <select id="category-filter" class="select" onchange="filterBooks()">
                        <option value="">All Categories</option>
                        <option value="Technology">Technology</option>
                        <option value="Business">Business</option>
                        <option value="Science">Science</option>
                        <option value="Fiction">Fiction</option>
                        <option value="Biography">Biography</option>
                    </select>
                    <select id="availability-filter" class="select" onchange="filterBooks()">
                        <option value="">All Books</option>
                        <option value="available">Available Only</option>
                        <option value="unavailable">Unavailable</option>
                    </select>
                </div>
            </div>

            <!-- Books Grid -->
            <div id="books-grid" class="books-grid">
                <!-- Books will be populated here -->
            </div>
        </div>

        <!-- History Page -->
        <div id="history-page" class="page">
            <h1 class="mb-8">Borrowing History</h1>
            
            <div class="card">
                <div class="card-header">
                    <h2>Past Borrowed Books</h2>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Book</th>
                                <th>Borrowed Date</th>
                                <th>Returned Date</th>
                                <th>Extensions</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="history-table">
                            <!-- History will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Book Details Modal -->
    <div id="book-modal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modal-title" class="modal-title"></h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modal-content">
                <!-- Modal content will be populated here -->
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification">
        <span id="notification-text"></span>
    </div>

    <script>
        // Sample data
        const books = [
            {
                id: 1,
                title: "Clean Code: A Handbook of Agile Software Craftsmanship",
                author: "Robert C. Martin",
                category: "Technology",
                isbn: "9780132350884",
                totalCount: 3,
                availableCount: 2,
                description: "A guide to writing clean, readable, and maintainable code."
            },
            {
                id: 2,
                title: "The Lean Startup",
                author: "Eric Ries",
                category: "Business",
                isbn: "9780307887894",
                totalCount: 2,
                availableCount: 0,
                description: "How today's entrepreneurs use continuous innovation to create radically successful businesses."
            },
            {
                id: 3,
                title: "Atomic Habits",
                author: "James Clear",
                category: "Business",
                isbn: "9780735211292",
                totalCount: 4,
                availableCount: 3,
                description: "Proven strategies for building good habits and breaking bad ones."
            },
            {
                id: 4,
                title: "Sapiens: A Brief History of Humankind",
                author: "Yuval Noah Harari",
                category: "Science",
                isbn: "9780062316097",
                totalCount: 2,
                availableCount: 1,
                description: "From the birth of humankind to the present day."
            },
            {
                id: 5,
                title: "The Pragmatic Programmer",
                author: "David Thomas, Andrew Hunt",
                category: "Technology",
                isbn: "9780135957059",
                totalCount: 3,
                availableCount: 2,
                description: "Your journey to mastery in programming."
            },
            {
                id: 6,
                title: "Dune",
                author: "Frank Herbert",
                category: "Fiction",
                isbn: "9780441172719",
                totalCount: 2,
                availableCount: 1,
                description: "A science fiction masterpiece about power, politics, and survival."
            }
        ];

        const borrowedBooks = [
            {
                id: 1,
                bookId: 1,
                title: "Clean Code: A Handbook of Agile Software Craftsmanship",
                author: "Robert C. Martin",
                borrowDate: "2024-06-12",
                dueDate: "2024-06-26",
                extensions: 0,
                status: "ACTIVE"
            },
            {
                id: 2,
                bookId: 2,
                title: "The Lean Startup",
                author: "Eric Ries",
                borrowDate: "2024-06-01",
                dueDate: "2024-06-15",
                extensions: 2,
                status: "ACTIVE"
            },
            {
                id: 3,
                bookId: 3,
                title: "Atomic Habits",
                author: "James Clear",
                borrowDate: "2024-06-05",
                dueDate: "2024-06-19",
                extensions: 1,
                status: "ACTIVE"
            }
        ];

        const borrowHistory = [
            {
                title: "Design Patterns",
                author: "Gang of Four",
                borrowDate: "2024-05-01",
                returnDate: "2024-05-15",
                extensions: 0,
                status: "RETURNED"
            },
            {
                title: "JavaScript: The Good Parts",
                author: "Douglas Crockford",
                borrowDate: "2024-04-15",
                returnDate: "2024-05-02",
                extensions: 1,
                status: "RETURNED"
            }
        ];

        // Current user state
        let currentUser = {
            borrowedCount: 3,
            maxBorrows: 5
        };

        // Page navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId + '-page').classList.add('active');
            
            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            event.target.classList.add('active');

            // Load page content
            if (pageId === 'browse') {
                loadBooksGrid();
            } else if (pageId === 'dashboard') {
                loadDashboard();
            } else if (pageId === 'history') {
                loadHistory();
            }
        }

        // Load dashboard content
        function loadDashboard() {
            document.getElementById('borrowed-count').textContent = currentUser.borrowedCount;
            
            const borrowedBooksContainer = document.getElementById('borrowed-books');
            borrowedBooksContainer.innerHTML = '';

            if (borrowedBooks.length === 0) {
                borrowedBooksContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">📚</div>
                        <p>You haven't borrowed any books yet</p>
                        <button class="btn btn-primary" onclick="showPage('browse')">Browse Books</button>
                    </div>
                `;
                return;
            }

            borrowedBooks.forEach(borrow => {
                const dueDate = new Date(borrow.dueDate);
                const today = new Date();
                const isOverdue = dueDate < today;
                const daysDiff = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));

                let dueDateClass = 'due-date';
                if (isOverdue) dueDateClass += ' error';
                else if (daysDiff <= 3) dueDateClass += ' warning';

                borrowedBooksContainer.innerHTML += `
                    <div class="borrowed-book">
                        <div class="borrowed-book-content">
                            <div class="borrowed-book-info">
                                <div class="borrowed-book-title">${borrow.title}</div>
                                <div class="borrowed-book-author">${borrow.author}</div>
                                <div class="borrowed-book-meta">
                                    <span class="${dueDateClass}">
                                        Due: ${dueDate.toLocaleDateString()}
                                        ${isOverdue ? '(Overdue)' : daysDiff <= 3 ? `(${daysDiff} days left)` : ''}
                                    </span>
                                    <span class="text-sm">Extensions: ${borrow.extensions}/3</span>
                                </div>
                            </div>
                            <div class="borrowed-book-actions">
                                <button class="btn btn-outline" onclick="extendLoan(${borrow.id})" 
                                        ${borrow.extensions >= 3 ? 'disabled' : ''}>
                                    Extend
                                </button>
                                <button class="btn btn-primary" onclick="returnBook(${borrow.id})">
                                    Return
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // Load books grid
        function loadBooksGrid() {
            const booksGrid = document.getElementById('books-grid');
            booksGrid.innerHTML = '';

            books.forEach(book => {
                const isAvailable = book.availableCount > 0;
                const canBorrow = currentUser.borrowedCount < currentUser.maxBorrows && isAvailable;

                booksGrid.innerHTML += `
                    <div class="book-card" onclick="showBookDetails(${book.id})">
                        <div class="book-card-content">
                            <div class="book-header">
                                <div class="book-cover">BOOK</div>
                                <span class="availability-badge ${isAvailable ? 'available' : 'unavailable'}">
                                    ${isAvailable ? 'Available' : 'Not Available'}
                                </span>
                            </div>
                            <div class="book-title">${book.title}</div>
                            <div class="book-author">${book.author}</div>
                            <div class="book-category">${book.category}</div>
                            <div class="book-availability">
                                <span>${book.availableCount}/${book.totalCount} available</span>
                            </div>
                            <div class="book-actions" onclick="event.stopPropagation()">
                                <button class="btn btn-secondary" onclick="showBookDetails(${book.id})">
                                    Details
                                </button>
                                <button class="btn ${canBorrow ? 'btn-primary' : 'btn-secondary'}" 
                                        onclick="borrowBook(${book.id})" 
                                        ${!canBorrow ? 'disabled' : ''}>
                                    ${!isAvailable ? 'Unavailable' : currentUser.borrowedCount >= currentUser.maxBorrows ? 'Limit Reached' : 'Borrow'}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // Load history
        function loadHistory() {
            const historyTable = document.getElementById('history-table');
            historyTable.innerHTML = '';

            borrowHistory.forEach(record => {
                historyTable.innerHTML += `
                    <tr>
                        <td>
                            <div class="font-medium">${record.title}</div>
                            <div class="text-sm" style="color: var(--gray-500);">${record.author}</div>
                        </td>
                        <td class="text-sm">${new Date(record.borrowDate).toLocaleDateString()}</td>
                        <td class="text-sm">${new Date(record.returnDate).toLocaleDateString()}</td>
                        <td class="text-sm">${record.extensions}</td>
                        <td>
                            <span class="status-badge returned">${record.status}</span>
                        </td>
                    </tr>
                `;
            });
        }

        // Book actions
        function borrowBook(bookId) {
            if (currentUser.borrowedCount >= currentUser.maxBorrows) {
                showNotification('You have reached the maximum borrowing limit of 5 books.', 'error');
                return;
            }

            const book = books.find(b => b.id === bookId);
            if (!book || book.availableCount <= 0) {
                showNotification('This book is not available for borrowing.', 'error');
                return;
            }

            // Simulate borrowing
            book.availableCount--;
            currentUser.borrowedCount++;

            const newBorrow = {
                id: Date.now(),
                bookId: book.id,
                title: book.title,
                author: book.author,
                borrowDate: new Date().toISOString().split('T')[0],
                dueDate: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                extensions: 0,
                status: 'ACTIVE'
            };

            borrowedBooks.push(newBorrow);
            showNotification(`Successfully borrowed "${book.title}"!`);
            loadBooksGrid();
            loadDashboard();
        }

        function returnBook(borrowId) {
            const borrowIndex = borrowedBooks.findIndex(b => b.id === borrowId);
            if (borrowIndex === -1) return;

            const borrow = borrowedBooks[borrowIndex];
            const book = books.find(b => b.id === borrow.bookId);
            
            // Update availability
            book.availableCount++;
            currentUser.borrowedCount--;

            // Add to history
            borrowHistory.unshift({
                title: borrow.title,
                author: borrow.author,
                borrowDate: borrow.borrowDate,
                returnDate: new Date().toISOString().split('T')[0],
                extensions: borrow.extensions,
                status: 'RETURNED'
            });

            // Remove from borrowed books
            borrowedBooks.splice(borrowIndex, 1);

            showNotification(`Successfully returned "${borrow.title}"!`);
            loadDashboard();
            loadBooksGrid();
        }

        function extendLoan(borrowId) {
            const borrow = borrowedBooks.find(b => b.id === borrowId);
            if (!borrow || borrow.extensions >= 3) {
                showNotification('Cannot extend loan more than 3 times.', 'error');
                return;
            }

            // Extend due date by 2 weeks
            const currentDueDate = new Date(borrow.dueDate);
            currentDueDate.setDate(currentDueDate.getDate() + 14);
            borrow.dueDate = currentDueDate.toISOString().split('T')[0];
            borrow.extensions++;

            showNotification(`Loan extended successfully! New due date: ${currentDueDate.toLocaleDateString()}`);
            loadDashboard();
        }

        function showBookDetails(bookId) {
            const book = books.find(b => b.id === bookId);
            if (!book) return;

            const isAvailable = book.availableCount > 0;
            const canBorrow = currentUser.borrowedCount < currentUser.maxBorrows && isAvailable;

            document.getElementById('modal-title').textContent = book.title;
            document.getElementById('modal-content').innerHTML = `
                <div class="book-details">
                    <div class="book-details-cover">BOOK</div>
                    <div class="book-details-info">
                        <h3>${book.title}</h3>
                        <p>by ${book.author}</p>
                        <p class="text-sm">Category: ${book.category}</p>
                        <p class="text-sm">ISBN: ${book.isbn}</p>
                        <div style="display: flex; gap: 1rem; margin-top: 0.5rem;">
                            <span class="text-sm font-medium" style="color: ${isAvailable ? 'var(--success-500)' : 'var(--error-500)'};">
                                ${isAvailable ? 'Available' : 'Not Available'}
                            </span>
                            <span class="text-sm">${book.availableCount}/${book.totalCount} copies available</span>
                        </div>
                    </div>
                </div>
                <div class="book-description">
                    <h4>Description</h4>
                    <p>${book.description}</p>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="closeModal()">Close</button>
                    <button class="btn ${canBorrow ? 'btn-primary' : 'btn-secondary'}" 
                            onclick="borrowBook(${book.id}); closeModal();" 
                            ${!canBorrow ? 'disabled' : ''}>
                        ${!isAvailable ? 'Unavailable' : currentUser.borrowedCount >= currentUser.maxBorrows ? 'Limit Reached' : 'Borrow Book'}
                    </button>
                </div>
            `;
            document.getElementById('book-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('book-modal').classList.add('hidden');
        }

        function filterBooks() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const categoryFilter = document.getElementById('category-filter').value;
            const availabilityFilter = document.getElementById('availability-filter').value;

            let filteredBooks = books.filter(book => {
                const matchesSearch = book.title.toLowerCase().includes(searchTerm) || 
                                    book.author.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || book.category === categoryFilter;
                const matchesAvailability = !availabilityFilter || 
                    (availabilityFilter === 'available' && book.availableCount > 0) ||
                    (availabilityFilter === 'unavailable' && book.availableCount === 0);

                return matchesSearch && matchesCategory && matchesAvailability;
            });

            const booksGrid = document.getElementById('books-grid');
            booksGrid.innerHTML = '';

            if (filteredBooks.length === 0) {
                booksGrid.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">📚</div>
                        <p>No books found matching your criteria</p>
                    </div>
                `;
                return;
            }

            filteredBooks.forEach(book => {
                const isAvailable = book.availableCount > 0;
                const canBorrow = currentUser.borrowedCount < currentUser.maxBorrows && isAvailable;

                booksGrid.innerHTML += `
                    <div class="book-card" onclick="showBookDetails(${book.id})">
                        <div class="book-card-content">
                            <div class="book-header">
                                <div class="book-cover">BOOK</div>
                                <span class="availability-badge ${isAvailable ? 'available' : 'unavailable'}">
                                    ${isAvailable ? 'Available' : 'Not Available'}
                                </span>
                            </div>
                            <div class="book-title">${book.title}</div>
                            <div class="book-author">${book.author}</div>
                            <div class="book-category">${book.category}</div>
                            <div class="book-availability">
                                <span>${book.availableCount}/${book.totalCount} available</span>
                            </div>
                            <div class="book-actions" onclick="event.stopPropagation()">
                                <button class="btn btn-secondary" onclick="showBookDetails(${book.id})">
                                    Details
                                </button>
                                <button class="btn ${canBorrow ? 'btn-primary' : 'btn-secondary'}" 
                                        onclick="borrowBook(${book.id})" 
                                        ${!canBorrow ? 'disabled' : ''}>
                                    ${!isAvailable ? 'Unavailable' : currentUser.borrowedCount >= currentUser.maxBorrows ? 'Limit Reached' : 'Borrow'}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            notificationText.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboard();
            loadBooksGrid();
        });

        // Close modal when clicking outside
        document.getElementById('book-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>